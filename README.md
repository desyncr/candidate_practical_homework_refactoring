# Solution

This challenge was solved in the following way:

- Refactored class `LanguageBatchBo`:
    - Delegate responsabilities to multiple specific classes (storage, logging, api clients, etc)
    - Created interfaces, base clases and factories
    - Removed hardcoded dependencies to be able to inject dependencies

- Created ApiClient class (with interface and factory) to wrap ApiCall class:
    - This enables us to have a higher level class as API client (SDK)
    - This class also recieves an ApiCallInterface so it's easy to mock

- Created specific generator types (for applet, application languages, etc):
    - This make it easy to add new type of generators (SRP)

- Created storage backends for the generators:
    - This enables us to have configurable backends (such as for mocking)
    - This also makes eary to add new backends (such as S3, NFS or other kind of backends)

Overall this is a flexible architecture that enables easy modification, testing and is fairly simple to understand.

### Other

- Put everything under the namespace Docler (common practice to interop with other vendors)
- Created various custom exception classes

## Documentation

Check autogenerated documentation at `./docs`. Included in a class diagram in .svg format.

## Tests

Check coverage at `./tests/reports/coverage`.

In order to run tests do as follows:

    $ cd path-to-project/
    $ composer install
    $ phpunit -c configuration.xml --testdox

Output should look like:

```
PHPUnit 8.1.6 by Sebastian Bergmann and contributors.

ApiCall
 ✔ Can get language file
 ✔ Can get applet languages
 ✔ Can get applet language file

ApiClientCall
 ✔ Throws exception on invalid argument
 ✔ Can get language files

LanguageBackend
 ✔ Can use for simple strings
 ✔ Can use filesystem for simple strings
 ✔ Can remove element

LanguageBatchBoFactory
 ✔ Can create instance
[2019-06-24 07:08:51] Docler\Language\AbstractLanguageBatch.INFO: Generating language files [] []
[2019-06-24 07:08:51] Docler\Language\AbstractLanguageBatch.INFO: [APPLICATION: portal] [] []
[2019-06-24 07:08:51] Docler\Language\AbstractLanguageBatch.INFO: [LANGUAGE: en] [] []
[2019-06-24 07:08:51] Docler\Language\AbstractLanguageBatch.INFO: OK [] []
[2019-06-24 07:08:51] Docler\Language\AbstractLanguageBatch.INFO: [LANGUAGE: hu] [] []
[2019-06-24 07:08:51] Docler\Language\AbstractLanguageBatch.INFO: OK [] []

LanguageBatchBo
 ✔ Can get language batch bo
[2019-06-24 07:08:51] Docler\Language\AbstractLanguageBatch.INFO: Getting applet language XMLs.. [] []
[2019-06-24 07:08:51] Docler\Language\AbstractLanguageBatch.INFO: Getting > JSM2_MemberApplet (memberapplet) language xmls.. [] []
[2019-06-24 07:08:51] Docler\Language\AbstractLanguageBatch.INFO: [LANGUAGE: en] [] []
[2019-06-24 07:08:51] Docler\Language\AbstractLanguageBatch.INFO: OK [] []
[2019-06-24 07:08:51] Docler\Language\AbstractLanguageBatch.INFO:  < JSM2_MemberApplet (memberapplet) language xml cached. [] []
[2019-06-24 07:08:51] Docler\Language\AbstractLanguageBatch.INFO: Applet language XMLs generated. [] []
 ✔ Can generate applet language xml files

Time: 1.17 seconds, Memory: 14.00 MB

OK (11 tests, 22 assertions)

```

---

# Task:
Your task is to refactor the LanguageBatchBo!

The solution will be evaluated based on the following goals:
* Keep the original functionality.
* Increase the inner code quality.
* Increase test coverage with unit tests.

# Rules:
* Create local git repository for the project.
* Commit after each coding step, when the system is in working condition.
* The interface of the LanguageBatchBo can't be changed (the generate_language_files.php should remain the same), but (of course) it's content can change and it can be split into new classes.
* The ApiCall, and Config classes are mock/simplified versions of the original dependencies, they can not be changed.
* The error message of the exceptions can be simplified.
* The console output of the script doesn't have to be the same as in the original version.
* Use PHPUnit as testing framework.
* Inline comments are not necessary.
* You can clone this repository, but the homework should be sent to us via email (including the git files) and it should not be shared on github, or otherwise on the internet. 

